{% extends "base.html" %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'webapp/css/index.css' %}">
<link rel="stylesheet" href="{% static 'webapp/css/welcome.css' %}">
<link rel="stylesheet" href="{% static 'webapp/css/about.css' %}">
<link rel="stylesheet" href="{% static 'webapp/css/portfolio.css' %}">
<link rel="stylesheet" href="{% static 'webapp/css/contact.css' %}">
{% endblock %}
{% block content %}
{% include 'webapp/partials/welcome.html' %}
{% include 'webapp/partials/about.html' %}
{% include 'webapp/partials/portfolio.html' %}
{% include 'webapp/partials/contact.html' %}

{% endblock %}
{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
  // Elements to reveal (tweak the selector to your taste)
  const targets = [
    ...document.querySelectorAll('.about-intro'),
    ...document.querySelectorAll('.about-facts > div'),
    ...document.querySelectorAll('.about-edu'),
    ...document.querySelectorAll('.timeline-item')
  ];

  // Add base class + stagger delay
  targets.forEach((el, i) => {
    el.classList.add('reveal');
    el.style.setProperty('--delay', `${Math.min(i * 90, 450)}ms`);
  });

  // Observer
  const io = ('IntersectionObserver' in window)
    ? new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            io.unobserve(entry.target); // reveal once
          }
        });
      }, {
        root: null,
        threshold: 0.2,
        rootMargin: '0px 0px -5% 0px' // helps trigger just before fully in view
      })
    : null;

  // Observe or fallback
  targets.forEach(el => {
    if (io) io.observe(el);
    else el.classList.add('is-visible'); // no-IO fallback
  });
});

(function() {
  const grid = document.querySelector('#portfolio .portfolio-grid');
  if (!grid) return;

  const io = new IntersectionObserver(entries => {
    if (entries[0].isIntersecting) {
      grid.classList.add('is-visible');   // triggers the CSS animation
      io.disconnect();                    // run once
    }
  }, { threshold: 0.25 });

  io.observe(grid);
})();
</script>
{% endblock %}